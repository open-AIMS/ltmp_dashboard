data_type
data_scale
domains
getwd()
setwd("R")
data_type
data_scale
domains
domain <- domains
scale <- data_scale
method <- data_type
models_db
models_db[1:10,]
models_db[80:90,]
models_db[70:90,]
models_db[60:90,]
models_db[50:90,]
models_db[20:90,]
models_db[10:90,]
models_db[10:90,]
a <- scan_models_folder(method = method,
                             scale = scale,
                             domain = domain)
a[1,]
a[1,] |> as.data.frame()
glimpse(a)
glimpse(models_db)
glimpse(models_db)
glimpse(models_db)
models_db[10:90,]
method
scale
tbls
scale <- "reef"
tbls
method
data
options(width = 200)
data
colnames(data)
data
options(width = 1000)
data
options(width = 5000)
data
options(width = 80)
data
data |> filter(reef == "Reef 14-133")
db_tbl
)
data_scale
domain
scale
scale <- "reefs"
scale <- "reef"
method
domain
domain <- "Reef 14-133"
data_hash
models_db
models_db |> filter(domain_name == "Reef 14-133")
scale
method
scan_models_folder(method = method, scale = scale, domain = domain)
scan_models_folder(method = method, scale = scale, domain = domain) |> as.data.frame()
scan_models_folder(method = method, scale = scale, domain = domain) |> glimpse()
colnames(models_db)
colnames(scan_models_folder(method = method,
                             scale = scale,
                             domain = domain))


scan_models_folder
colnames(scan_models_folder(method = method,
                             scale = scale,
                             domain = domain))
colnames(models_db)
get_db_model_data()
models_db
models_db |> filter(domain_name == "Reef 14-133")
models_db |> filter(domain_name == "Reef 14-133") |> as.data.frame()
data_hash
tb
method
scale
scale <- "sector"
tbls
tbl(con, "manta_sum")
tbl(con, "manta_sector_sum")
data
data
scale
method
scale <- "nrm"
data
method
scale
domain
domain <- "Burdekin"
scale
as.data.frame(scan_models_folder(method = method,
                             scale = scale,
                             domain = domain))
glimpse(scan_models_folder(method = method,
                             scale = scale,
                             domain = domain))
models_db
models_db |> filter(domain_name == "Burdekin")
models_db |> filter(domain_name == "Burdekin") |> glimpse()
get_db_model_data(method = "photo-transect", scale = "reef")
get_db_model_data(method = "photo-transect", scale = "reef")
get_db_model_data(method = "photo-transect", scale = "reef")
get_db_model_data(method = "photo-transect", scale = "reef", domain = NULL)
args
purpose
sql_file
system("java -jar ../dbExport.jar ../../dashboard/data/fish.sql ../../data/fish.csv reef reefmon")
system("java -jar ../dbExport.jar ../../dashboard/data/fish.sql ../../data/fish.csv reef reefmon")
data_type
csv_file
csv_file <- "~/data/fish.csv"
fish
colnames(fish)
system("java -jar ../dbExport.jar ../../dashboard/data/fish.sql ../../data/fish.csv reef reefmon")
csv_file <- "~/data/fish.csv"
colnames(fish)
head(fish)
fish |> as.data.frame() |> head()
system("java -jar ../dbExport.jar ../../dashboard/data/fish.sql ../../data/fish.csv reef reefmon")
system("java -jar ../dbExport.jar ../../dashboard/data/fish.sql ../../data/fish.csv reef reefmon")
system("java -jar ../dbExport.jar ../../dashboard/data/fish.sql ../../data/fish.csv reef reefmon")
fish |> as.data.frame() |> head()
colnames(fish)
fish |> filter(REEF_NAME == "BORDER ISLAND REEF")
fish |> filter(AIMS_REEF_NAME == "Border Island Reef")
fish |> filter(AIMS_REEF_NAME == "Border Island")
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1) |> as.data.frame()
system2("java", args = c("-jar", "../dbExport.jar", shQuote(paste0("../../dashboard/data/fish_codes.sql")), shQuote(paste0("../../data/fish_codes.csv")), "reef", "reefmod"))
system2("java", args = c("-jar", "../dbExport.jar", shQuote(paste0("../../dashboard/data/fish_codes.sql")), shQuote(paste0("../../data/fish_codes.csv")), "reef", "reefmod"))
sql_file
data_type
sql_file <- "fish_code"
data_type <- "fish_code"
data_type <- "fish_codes"
sql_file <- "fish_codes"
csv_file
fish_codes
)
?matches
fish_codes
fish_codes |> filter(!is.na(TROPHIC_CODE))
fish_codes |> filter(!is.na(TROPHIC_GUILD_2021))
fish_codes |> filter(FISH_CODE == "LUT.ARGE"))
fish_codes |> filter(FISH_CODE == "LUT.ARGE")
fish_codes |> filter(FISH_CODE == "LUT.ARGE")
fish_codes |> filter(FISH_CODE == "PMS.AREO")
fish_codes |> filter(FISH_CODE == "PMS.AREO")
fish_codes |> filter(FISH_CODE == "PMS.AREO") |> as.data.frame()
fish_codes |> filter(FISH_FEEDING_SID == 28) |> as.data.frame()
fish_codes |> filter(!is.na(FISH_FEEDING_SID)) 
fish_codes |> filter(FISH_CODE == "SIG.VULP") |> as.data.frame()
fish_codes |> filter(TROPHIC_CODE == "PI") |> as.data.frame()
fish_codes |> filter(FISH_CODE == "PMS.OLIG") |> as.data.frame()
fish_codes |> filter(FISH_FEEDING_SID == 26) |> as.data.frame()
fish_codes
fish
fish |> group_by(P_CODE, REEF_NAME, AIMS_REEF_NAME, REEF_ZONE, SITE_NO, TRANSECT_NO, REPORT_YEAR, SURVEY_DATE) |> full_join(fish_code)
fish |> head()
fish |> dplyr::select(-TROPHIC_GUILD_2021, -FISH_COUNT_SID) |> group_by(P_CODE, REEF_NAME, AIMS_REEF_NAME, REEF_ZONE, SITE_NO, TRANSECT_NO, REPORT_YEAR, SURVEY_DATE) |> full_join(fish_codes)
fish |> dplyr::select(-TROPHIC_GUILD_2021, -FISH_COUNT_SID) |> group_by(P_CODE, REEF_NAME, AIMS_REEF_NAME, REEF_ZONE, SITE_NO, TRANSECT_NO, REPORT_YEAR, SURVEY_DATE) |> full_join(fish_codes)
fish
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1) |> dplyr::select(-TROPHIC_GUILD_2021, -FISH_COUNT_SID) |> group_by(P_CODE, REEF_NAME, AIMS_REEF_NAME, REEF_ZONE, SITE_NO, TRANSECT_NO, REPORT_YEAR, SURVEY_DATE) |> full_join(fish_codes)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1) |> dplyr::select(-TROPHIC_GUILD_2021, -FISH_COUNT_SID) |> group_by(P_CODE, REEF_NAME, AIMS_REEF_NAME, REEF_ZONE, SITE_NO, TRANSECT_NO, REPORT_YEAR, SURVEY_DATE) |> full_join(fish_codes)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1) |> dplyr::select(-TROPHIC_GUILD_2021, -FISH_COUNT_SID) |> group_by(P_CODE, REEF_NAME, AIMS_REEF_NAME, REEF_ZONE, SITE_NO, TRANSECT_NO, REPORT_YEAR, SURVEY_DATE) -> fish1
fish1
head(fish_codes)
fish1 <- fish1 |> dplyr::select(-TROPHIC_CODE, -TROPHIC_GUILD_2021)
fish1 <- fish1 |> dplyr::select(-TROPHIC_GUILD_2021)
fish1
fish1 |> full_join(fish_codes)
fish_codes
fish_codes |> distinct()
fish1 |> full_join(hea(fish_codes))
fish1 |> full_join(head(fish_codes))
fish1
fish1 |> full_join(head(fish_codes)) |> as.data.frame()
tibble(~A, ~B, ~C, "a", "ab", 1, "a", "ac", 2, "b", "ab", 3, "c", "ac", 4)
tribble(~A, ~B, ~C, "a", "ab", 1, "a", "ac", 2, "b", "ab", 3, "c", "ac", 4)
d <- tribble(~A, ~B, ~C, "a", "ab", 1, "a", "ac", 2, "b", "ab", 3, "c", "ac", 4)
l <- tribble(~B, ~D, "ab", 10, "ac", 20, "ad", 30)
d |> group_by(A) |> full_join(d)
d |> group_by(A) |> full_join(l)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1) |> dplyr::select(-TROPHIC_GUILD_2021, -FISH_COUNT_SID) |> group_by(P_CODE, REEF_NAME, AIMS_REEF_NAME, REEF_ZONE, SITE_NO, TRANSECT_NO, REPORT_YEAR, SURVEY_DATE) -> fish1
dim(fish)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1) |> as.data.frame() |> head()
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1) |> as.data.frame() |> tail()
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1) |> as.data.frame() |> tail()
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1) |> as.data.frame() |> tail()
d
l
crossing(d, l)
fish |> filter(AIMS_REEF_NAME == "Border Island", REPORT_YEAR == 2000, SITE_NO == 1, TRANSECT_NO == 1) |> as.data.frame() |> tail()
fish
fish |> group_by(-FISH_CODE,-LENGTH,-ABUNDANCE,-FAMILY,-GENUS)
fish |> group_by(-c(FISH_CODE,-LENGTH,-ABUNDANCE,-FAMILY,-GENUS))
fish |> group_by(-c("FISH_CODE","LENGTH","ABUNDANCE","FAMILY","GENUS"))
?group_by
fish |> pivot_wider(names_from = FISH_CODE)
fish |> group_by(across(c("FISH_CODE", "LENGTH", "ABUNANCE", "FAMILY", "GENUS"))) |> pivot_wider(names_from = FISH_CODE)
fish |> group_by(across(c("FISH_CODE", "LENGTH", "ABUNDANCE", "FAMILY", "GENUS"))) |> summarise(points = n()) |> pivot_wider(names_from = FISH_CODE)
fish |> group_by(across(c("FISH_CODE", "LENGTH", "ABUNDANCE", "FAMILY", "GENUS"))) |> summarise(points = n()) |> pivot_wider(names_from = FISH_CODE, values_from = points)
fish |> group_by(across(-c("FISH_CODE", "LENGTH", "ABUNDANCE", "FAMILY", "GENUS"))) |> summarise(points = n()) |> pivot_wider(names_from = FISH_CODE, values_from = points)
fish |> group_by(across(-c("FISH_CODE", "LENGTH", "ABUNDANCE", "FAMILY", "GENUS"))) |> summarise(points = n()) 
 f1 |> as.data.frame() |> head()
?reframe
f1
f1$data[[1]]
fish_codes
f1
f1$data[[1]]
f1$data[[1]] |> filter(!is.na(LENGTH))
f1$data[[1]] |> filter(is.na(ABUNDANCE))
f1$data[[1]]
f1$data[[1]]
f1$data[[1]] |> filter(is.na(ABUNDANCE))
?replace_na
f1$data[[1]]
f1
f1$data[[1]] |> filter(is.na(ABUNDANCE))
f1$data[[1]] |> filter(is.na(ABUNDANCE))
f1$data[[1]] |> filter(ANreframe(                                                          │                              |                                                                                                          
 533       full_join(.x, fish_codes)                                       │                              |                                                                                                          
 534       )      BUN)
f1$data[[1]] |> filter(ABUNDANCE == 0)
fish
fish
csv_file
list.files()
colnames(fish)
